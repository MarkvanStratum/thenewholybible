<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Spin & Win â€” 3 Free Spins</title>

  <!-- Display font for wedge numbers -->
  <link href="https://fonts.googleapis.com/css2?family=Bangers&display=swap" rel="stylesheet">

  <style>
    :root {
      --maxw: 420px;
      --ring: 10px;
      --transition: 3.2s cubic-bezier(0.12,0.64,0.05,1);
      --bg-top:#120020;
      --bg-bottom:#3b0764;
      --gold:#facc15;
      --gold-deep:#b45309;
      --purple:#4f46e5;
      --pink:#ec4899;
      --text:#f9fafb;
      --muted:#9ca3af;
    }
    * { box-sizing:border-box; }

    body {
      margin:0;
      font-family:system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif;
      background:
        radial-gradient(circle at top, rgba(254,249,195,0.08), transparent 55%),
        linear-gradient(to bottom,var(--bg-top),var(--bg-bottom));
      color:var(--text);
      -webkit-tap-highlight-color:transparent;
    }

    .wrap {
      min-height:100svh;
      display:flex;
      flex-direction:column;
      align-items:center;
    }

    header {
      width:100%;
      max-width:var(--maxw);
      padding:24px 16px 4px;
      text-align:center;
    }
    h1 {
      margin:0;
      font-size:32px;
      font-weight:900;
      letter-spacing:0.04em;
      text-transform:uppercase;
      color:#fef9c3;
      text-shadow:0 3px 10px rgba(0,0,0,.9);
    }
    .sub {
      margin-top:4px;
      font-size:13px;
      color:var(--muted);
    }
    .sub b {
      color:#e5e7ff;
    }

    .main {
      width:100%;
      max-width:var(--maxw);
      flex:1;
      display:flex;
      flex-direction:column;
      align-items:center;
      gap:14px;
      padding:0 16px 14px;
    }

    /* Top pointer (bigger & more obvious) */
    .pointer {
      position:relative;
      width:100%;
      display:flex;
      justify-content:center;
      margin-bottom:0;
      z-index:10;
    }
    .pointer:after {
      content:"";
      position:absolute;
      top:0;
      width:0; height:0;
      border-left:18px solid transparent;
      border-right:18px solid transparent;
      border-bottom:28px solid var(--gold);
      filter:drop-shadow(0 3px 6px rgba(0,0,0,.85));
    }
    .pointer:before {
      content:"";
      position:absolute;
      top:26px;
      width:14px;
      height:14px;
      border-radius:50%;
      background:radial-gradient(circle at 30% 20%,#fefce8,#fed7aa,#b45309);
      box-shadow:0 2px 4px rgba(0,0,0,.7);
    }

    /* Wheel + stand wrapper */
    .wheel-wrap {
      position:relative;
      width:min(74vw,var(--maxw));
      height:min(74vw,var(--maxw));
      display:flex;
      align-items:center;
      justify-content:center;
    }

    /* Outer glowing halo */
    .wheel-halo {
      position:absolute;
      inset:-14px;
      border-radius:50%;
      background:radial-gradient(circle, rgba(250,250,210,0.12), transparent 70%);
      filter:blur(2px);
      z-index:0;
    }

    .wheel {
      position:absolute;
      inset:0;
      margin:auto;
      border-radius:50%;
      overflow:hidden;
      border:var(--ring) solid #fef3c7;
      box-shadow:
        0 18px 40px rgba(0,0,0,.9),
        0 0 0 5px #a16207,
        0 0 0 8px #facc15;
      background:#1f2937;
      transform:rotate(0deg);
      z-index:2;
    }
    .wheel.spinning {
      transition:transform var(--transition);
    }

    /* Bulb lights around rim */
    .bulb {
      position:absolute;
      width:9px;
      height:9px;
      border-radius:50%;
      background:#fef3c7;
      box-shadow:0 0 8px rgba(250,250,210,.95);
      z-index:3;
    }

    /* Prize labels: readable & bold */
    .seg-label-item {
      position:absolute;
      font-family:'Bangers', system-ui, sans-serif;
      font-weight:900;
      font-size:16px;
      letter-spacing:0.02em;
      color:#ffffff;
      text-shadow:
        -1px -1px 0 #111827,
         1px -1px 0 #111827,
        -1px  1px 0 #111827,
         1px  1px 0 #111827;
      white-space:nowrap;
      pointer-events:none;
      z-index:4;
    }

    .cap {
      position:absolute;
      inset:0;
      display:flex;
      align-items:center;
      justify-content:center;
      pointer-events:none;
      z-index:5;
    }
    .cap div {
      width:22%;
      height:22%;
      border-radius:50%;
      background:radial-gradient(circle at 30% 20%, #fef9c3, #fde68a, #b45309);
      box-shadow:
        inset 0 2px 5px rgba(0,0,0,.25),
        0 3px 8px rgba(0,0,0,.6);
      display:flex;
      align-items:center;
      justify-content:center;
      font-size:20px;
      font-weight:900;
      color:#111827;
    }

    /* Stand under wheel */
    .stand {
      position:relative;
      width:52%;
      max-width:200px;
      height:52px;
      margin-top:2px;
      background:linear-gradient(to bottom,#facc15,#b45309);
      border-radius:0 0 32px 32px;
      box-shadow:0 -4px 10px rgba(0,0,0,.6);
      clip-path:polygon(18% 0,82% 0,100% 75%,0 75%);
      z-index:1;
    }
    .stand-base {
      position:relative;
      margin-top:-2px;
      width:70%;
      height:10px;
      background:linear-gradient(to right,#b45309,#facc15,#b45309);
      border-radius:999px;
      box-shadow:0 6px 14px rgba(0,0,0,.85);
      z-index:0;
    }

    .btn {
      width:100%;
      max-width:var(--maxw);
      margin-top:4px;
      padding:14px 18px;
      border:none;
      border-radius:999px;
      font-weight:900;
      font-size:17px;
      text-transform:uppercase;
      letter-spacing:0.06em;
      background:linear-gradient(to right,var(--purple),var(--pink));
      color:#fff;
      box-shadow:0 12px 26px rgba(236,72,153,.6);
    }
    .btn:disabled {
      background:#6b7280;
      color:#e5e7eb;
      box-shadow:none;
    }

    .msg {
      text-align:center;
      font-size:13px;
      color:#e5e7eb;
      text-shadow:0 1px 3px rgba(0,0,0,.85);
    }
    .hint {
      text-align:center;
      font-size:10px;
      color:var(--muted);
    }

    footer {
      width:100%;
      max-width:var(--maxw);
      padding:0 16px 16px;
      text-align:center;
      font-size:9px;
      color:#6b7280;
    }

    /* Result popup: centered overlay */
    .result-popup {
      position:fixed;
      left:50%;
      top:50%;
      transform:translate(-50%, 10px) scale(0.96); /* start slightly offset */
      padding:12px 22px;
      border-radius:18px;
      background:rgba(15,23,42,0.98);
      color:#e5e7eb;
      font-size:15px;
      box-shadow:0 16px 40px rgba(0,0,0,.85);
      z-index:50;
      opacity:0;
      pointer-events:none;
      transition:opacity .25s ease, transform .25s ease;
    }
    .result-popup.show {
      opacity:1;
      transform:translate(-50%, -50%) scale(1);
    }
    .result-popup.jackpot {
      background:linear-gradient(to right,#22c55e,#15803d);
      color:#f9fafb;
      font-weight:800;
      box-shadow:0 18px 48px rgba(34,197,94,.8);
    }

    /* Final screen */
    .final {
      min-height:100svh;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:40px 16px;
      background:
        radial-gradient(circle at top, rgba(254,249,195,0.16), transparent 55%),
        linear-gradient(to bottom,#111827,#111827);
      color:#f9fafb;
      text-align:center;
    }
    .card {
      width:100%;
      max-width:var(--maxw);
      background:radial-gradient(circle at top,#111827,#020817);
      border-radius:22px;
      padding:26px 20px;
      box-shadow:0 18px 40px rgba(0,0,0,.9);
      border:1px solid rgba(250,250,250,.08);
    }
    .cta {
      display:block;
      margin-top:16px;
      padding:14px 18px;
      border-radius:16px;
      font-weight:800;
      background:linear-gradient(to right,#22c55e,#a3e635);
      color:#020817;
      text-decoration:none;
      box-shadow:0 10px 24px rgba(34,197,94,.6);
    }
    .hide { display:none; }

    @media (max-width:360px){
      .seg-label-item { font-size:13px; }
    }
  </style>
</head>
<body>
  <!-- GAME SCREEN -->
  <section id="game" class="wrap">
    <header>
      <h1>Spin & Win</h1>
      <div class="sub">Get <b>3 free spins</b> to unlock glowing jackpot prizes.</div>
    </header>

    <main class="main">
      <div class="pointer"></div>

      <div class="wheel-wrap">
        <div class="wheel-halo"></div>
        <div id="wheel" class="wheel"></div>
        <div class="cap"><div>ðŸ’²</div></div>
      </div>

      <div class="stand"></div>
      <div class="stand-base"></div>

      <button id="spinBtn" class="btn">Spin the wheel</button>
      <div id="msg" class="msg">You have 3 free spins.</div>
      <div class="hint">Spin 1: guaranteed win â€¢ Spin 2: 0 â€¢ Spin 3: $10,000 Jackpot</div>
    </main>

    <footer>Demo only. Visual odds and prizes are illustrative.</footer>
  </section>

  <!-- Spin result popup -->
  <div id="spinResult" class="result-popup hide"></div>

  <!-- FINAL JACKPOT SCREEN -->
  <section id="final" class="final hide">
    <div class="card">
      <div style="font-size:54px; line-height:1">ðŸŽŠ</div>
      <h2 style="margin:10px 0 6px; font-size:28px; font-weight:800; letter-spacing:0.04em; text-transform:uppercase;">
        JACKPOT WINNER
      </h2>
      <p style="margin:0 0 12px; font-size:18px;">
        You've hit the grand prize â€” <b>$10,000</b>!
      </p>
      <a class="cta" href="https://www.google.com">Click here to claim your prize</a>
      <div style="font-size:11px; color:#9ca3af; margin-top:8px;">
        (Google used as placeholder claim URL)
      </div>
    </div>
  </section>

  <script>
    // ------- Segments (12 wedges clockwise from top) -------
    const segments = [
      { label: "$5",      type: "small"   },
      { label: "0",       type: "zero"    },
      { label: "$10",     type: "small"   },
      { label: "0",       type: "zero"    },
      { label: "$20",     type: "small"   },
      { label: "0",       type: "zero"    },
      { label: "$50",     type: "small"   },
      { label: "0",       type: "zero"    },
      { label: "$100",    type: "small"   },
      { label: "0",       type: "zero"    },
      { label: "$500",    type: "small"   },
      { label: "$10,000", type: "jackpot" },
    ];

    const SEGMENT_COUNT = segments.length;
    const DEG_PER = 360 / SEGMENT_COUNT;

    const wheel = document.getElementById("wheel");

    // ----- Build colored wedges -----
    const colors = [
      "#f97316","#22c55e","#60a5fa","#facc15",
      "#ec4899","#38bdf8","#a855f7","#fb7185"
    ];
    const stops = segments.map((_, i) => {
      const start = (i / SEGMENT_COUNT) * 100;
      const end   = ((i + 1) / SEGMENT_COUNT) * 100;
      const c     = colors[i % colors.length];
      return `${c} ${start}% ${end}%`;
    }).join(",");
    wheel.style.background = `conic-gradient(${stops})`;

    // ----- Bulbs: aligned circle around wheel -----
    (function addBulbs(){
      const bulbCount = 36;
      const rect = wheel.getBoundingClientRect();
      const center = rect.width / 2;
      const radius = center + 14;

      for (let i = 0; i < bulbCount; i++) {
        const angle = (i / bulbCount) * 2 * Math.PI;
        const x = center + Math.cos(angle) * radius;
        const y = center + Math.sin(angle) * radius;

        const b = document.createElement("div");
        b.className = "bulb";
        b.style.left = x + "px";
        b.style.top  = y + "px";
        wheel.parentElement.appendChild(b);
      }
    })();

    // ----- Labels at outer edge of each wedge -----
    (function placeLabels(){
      const rect = wheel.getBoundingClientRect();
      const radius = rect.width / 2;
      const offset = 28;

      segments.forEach((seg, i) => {
        const angleDeg = i * DEG_PER + DEG_PER / 2;
        const angleRad = angleDeg * Math.PI / 180;

        const r = radius - offset;
        const x = radius + Math.sin(angleRad) * r;
        const y = radius - Math.cos(angleRad) * r;

        const label = document.createElement("div");
        label.className = "seg-label-item";
        label.textContent = seg.label;
        label.style.left = x + "px";
        label.style.top  = y + "px";
        label.style.transform = `translate(-50%, -50%) rotate(${angleDeg}deg)`;

        wheel.appendChild(label);
      });
    })();

    // ----- Deterministic outcomes -----
    const TYPE_INDEXES = segments.reduce((acc, seg, i) => {
      (acc[seg.type] ||= []).push(i);
      return acc;
    }, {});

    const SEQUENCE = ["small","zero","jackpot"]; // 1st, 2nd, 3rd spins

    let spinCount = 0;
    let rotation = 0;

    const btn        = document.getElementById("spinBtn");
    const msg        = document.getElementById("msg");
    const game       = document.getElementById("game");
    const final      = document.getElementById("final");
    const spinResult = document.getElementById("spinResult");

    function pickIndex(type){
      const arr = TYPE_INDEXES[type] || [0];
      return arr[spinCount % arr.length];
    }

    function showResultPopup(text, isJackpot=false) {
      spinResult.textContent = text;
      spinResult.classList.remove("hide","jackpot");
      if (isJackpot) spinResult.classList.add("jackpot");
      void spinResult.offsetWidth; // reset animation
      spinResult.classList.add("show");

      const duration = isJackpot ? 1600 : 1000;
      setTimeout(() => {
        spinResult.classList.remove("show","jackpot");
        spinResult.classList.add("hide");
      }, duration);
    }

    function spin(){
      if (btn.disabled) return;
      if (spinCount >= 3) return;

      const outcomeType = SEQUENCE[spinCount];
      const targetIndex = pickIndex(outcomeType);
      const targetCenter = targetIndex * DEG_PER + DEG_PER / 2;

      const fullTurns = 7 + spinCount * 2;

      // Ensure final position is exactly at target, independent of previous spins
      const currentNorm = ((rotation % 360) + 360) % 360;
      const extra = (currentNorm + targetCenter) % 360;
      const nextRotation = rotation - (fullTurns * 360 + extra);

      wheel.classList.add("spinning");
      btn.disabled = true;
      btn.textContent = "Spinningâ€¦";
      msg.textContent = "Spinningâ€¦";

      requestAnimationFrame(() => {
        wheel.style.transform = `rotate(${nextRotation}deg)`;
      });

      const onEnd = () => {
        wheel.removeEventListener("transitionend", onEnd);
        wheel.classList.remove("spinning");
        rotation = nextRotation;
        spinCount++;

        const prize = segments[targetIndex].label;
        let text;

        if (outcomeType === "zero") {
          text = "No prize this time. Try again!";
        } else if (outcomeType === "jackpot") {
          text = "JACKPOT! You won $10,000!";
        } else {
          text = `You won ${prize}!`;
        }

        // Update inline text and show popup AFTER wheel stops
        msg.textContent = text;
        const isJackpot = outcomeType === "jackpot";
        showResultPopup(text, isJackpot);

        if (spinCount >= 3) {
          // Wheel fully stopped; give a short moment so user sees $10,000 at top
          setTimeout(() => {
            game.classList.add("hide");
            final.classList.remove("hide");
          }, 2000);
          btn.textContent = "Spins used";
          btn.disabled = true;
        } else {
          btn.disabled = false;
          btn.textContent = "Spin the wheel";
        }
      };

      wheel.addEventListener("transitionend", onEnd);
    }

    btn.addEventListener("click", spin);
  </script>
</body>
</html>
